## Setting up a web proxy

So the main DSA application from Girder lives in port :8080 so would be visible at
http://yourIPaddress:8080/
I usually keep this as is, although we could remap it to port 80 or 8080.

Normally, a single database backend may host multiple slide galleries, and I usually have separate subdomains or URL's for them.

So I may have something like  http://glioma.digitalslidearchive.emory and http://brca.digitalslidearchive.emory.edu  which point to a separate "app" running on the server.  These apps serve up the slides and content that's relevant ... so even though my main Girder Instance has all the slides for both subdomains, it's often easier to have separate content specific setup.

So in this case, we are setting up a repository to host a collection of Mouse Slides that I have scanned.  I am going to be using the domain  http://computablebrain.emory.edu .  I want to have a separate app/web site at http://mouse.computablebrain.emory.edu which serves up the content.  So first thing I need to do is set up something to allow my single host (i.e. computablebrain) to be accessible from various subdomains and point to the correct content.  Although APACHE would also likely work, I've been using NGINX as my web server/proxy.

First things first.. install NGINX

```sudo apt-get install nginx```

assets/SettingUpWebProxy-12630.png

At least on Ubuntu 16.04, nginx puts its main configuration file in /etc/nginx/

```cd /etc/nginx/```

If you look in the sites-available directory, there should be a file called default
that looks something like this

```
server {
        listen 80 default_server;
        listen [::]:80 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Note: You should disable gzip for SSL traffic.
        # See: https://bugs.debian.org/773332
        #
        # Read up on ssl_ciphers to ensure a secure configuration.
        # See: https://bugs.debian.org/765782
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        root /var/www/html;

        # Add index.php to the list if you are using PHP
        index index.html index.htm index.nginx-debian.html;

        server_name _;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }



        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #       deny all;
        #}
}
```

Your may have some extra stuff commented out using # I removed the php stuff to save some space.

Now in my case, we want to actually create a SEPARATE file in this same directory, called
mouse

```sudo nano mouse```

This will be where we define what our webserver does when it connects to mouse.computablebrain.emory.edu
